<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Player - By Stmify</title>
<link rel="shortcut icon" href="https://i.postimg.cc/sxkGqfMT/x-fire-flix.png">

<!-- Clappr + Shaka + Plugins -->
<script src="https://cdn.jsdelivr.net/npm/clappr@latest/dist/clappr.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/clappr-pip@0.2.0/dist/clappr-pip.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/dash-shaka-playback@latest/dist/dash-shaka-playback.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/clappr/clappr-level-selector-plugin@latest/dist/level-selector.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@c3voc/clappr-audio-track-selector@0.2.4/dist/audio-track-selector.min.js"></script>

<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  background: #000;
}
#player {
  width: 100%;
  height: 100%;
  background: #000;
  position: fixed;
  top: 0;
  left: 0;
}
</style>
</head>
<body>

<div id="player"></div>

<script>
// Streams JSON
const streams = {
  "Willow_Sports": {
    "url": "https://otte.live.cf.ww.aiv-cdn.net/iad-nitro/live/clients/dash/enc/f60kqesunw/out/v1/a435ed7a00f947deb4369b46d8f2fb70/cenc.mpd",
    "k1": "1779c27b9d077a3ba0c9cc1bb9a94b9f",
    "k2": "cc5cf3b7928fb9e0a1ee6a8b566f0a8e"
  },
  "Willow": {
    "url": "https://fl7.moveonjoy.com/WILLOW_CRICKET/manifest.m3u8" 
  },
  "TNT_Sports_PT_BR": {
    "url": "https://bra.06134346.xyz/proxy?url=https://0012-aws.vrioott.com/v1/78b66fd5e8204e048e31ad1c6eebbb8e/manifest.mpd?hdnts=exp%3D1751293344%7Eacl%3D%2F*%7Eid%3D996e0602-0475-53fa-b17a-bd3adaab1ce5%7Ehmac%3D08da58cba4e3a240d219b6c37db49fdfd51a183f5f583fb4f935e4713a626edd",
    "clearkeys": {
      "7c725bec30ce42b68cf6919403ba2376":"ce5ad511ef4efeacf533fbac6815dbe7",
      "4d2f65c1e6573da2991edb00f427c2e0":"a8ab35b34424226759b2f697ee4e13a0"
    }
  }
};

// Function to get URL param
function getQueryParam(name) {
  const urlParams = new URLSearchParams(window.location.search);
  return urlParams.get(name);
}

// Determine which stream to load
let streamId = getQueryParam('id');
if (!streamId || !streams[streamId]) {
  streamId = Object.keys(streams)[0]; // fallback to first stream
}

const streamInfo = streams[streamId];

// Initialize player
if (streamInfo && streamInfo.url) {
  let clearkeys = null;

  if (streamInfo.clearkeys) {
    clearkeys = streamInfo.clearkeys;
  } else if (streamInfo.k1 && streamInfo.k2) {
    clearkeys = {};
    clearkeys[streamInfo.k1] = streamInfo.k2;
  }

  const playerOptions = {
    parentId: "#player",
    source: streamInfo.url,
    plugins: [AudioTrackSelector, LevelSelector, ClapprPip.PipButton, ClapprPip.PipPlugin, DashShakaPlayback],
    watermark: "",
    position: "top-left",
    exitFullscreenOnEnd: true,
    autoPlay: true,
    mute: true,
    width: "100%",
    height: "100%",
    playback: { crossOrigin: "anonymous" }
  };

  if (clearkeys) {
    playerOptions.shakaConfiguration = { drm: { clearKeys: clearkeys } };
  }

  new Clappr.Player(playerOptions);
}
</script>

</body>
</html>
