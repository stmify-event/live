<!DOCTYPE html>  
<html lang="en">  
<head>  
<meta charset="UTF-8" />  
<meta name="viewport" content="width=device-width, initial-scale=1" />  
<title>CRICHD | Player - By X Fire Flix</title>  
<link rel="shortcut icon" href="https://i.postimg.cc/sxkGqfMT/x-fire-flix.png">  
<script src="https://cdn.jsdelivr.net/npm/clappr@latest/dist/clappr.min.js"></script>  
<style>  
html, body {  
  margin: 0;  
  padding: 0;  
  height: 100%;  
  background-color: #000;  
}  
#player {  
  width: 100%;  
  height: 100%;  
  background: #000;  
  position: fixed;  
  top: 0;  
  left: 0;  
}  
.loading {  
  position: fixed;  
  top: 0;  
  left: 0;  
  width: 100%;  
  height: 100%;  
  background: #000;  
  color: #fff;  
  display: flex;  
  align-items: center;  
  justify-content: center;  
  font-family: Arial, sans-serif;  
  font-size: 1.2rem;  
  z-index: 1000;  
}  
</style>  
</head>  
<body>  
<div id="player"></div>  
<div class="loading" id="loading">Loading Player...</div>  
  
<script>  
const jsonUrl = "https://raw.githubusercontent.com/abusaeeidx/CricHd-playlists-Auto-Update-permanent/main/api.json";  
  
// Get ?id= parameter  
const urlParams = new URLSearchParams(window.location.search);  
const channelId = urlParams.get('id');  
  
async function loadPlayer() {  
  const loading = document.getElementById('loading');  
  try {  
    if (!channelId) {  
      loading.textContent = "No channel ID provided!";  
      return;  
    }  
  
    const response = await fetch(jsonUrl);  
    if (!response.ok) throw new Error("Failed to load channel list");  
  
    const channels = await response.json();  
    const channel = channels.find(c => c.id === channelId);  
  
    if (!channel) {  
      loading.textContent = "Channel not found!";  
      return;  
    }  
  
    // Remove loader when ready  
    loading.remove();  
  
    // Create player  
    new Clappr.Player({  
      parentId: "#player",  
      source: channel.link,  
      width: "100%",  
      height: "100%",  
      autoPlay: true,  
      mute: true,  
      mimeType: "application/x-mpegURL",  
      playback: {  
        hlsjsConfig: {  
          xhrSetup: function(xhr, url) {  
            xhr.setRequestHeader("referer", channel.referer || "");  
            xhr.setRequestHeader("origin", channel.origin || "");  
          }  
        }  
      }  
    });  
  
    document.title = `${channel.name} | CRICHD - X Fire Flix`;  
  
  } catch (err) {  
    console.error(err);  
    loading.textContent = "Error loading player!";  
  }  
}  
  
loadPlayer();  
</script>  
<script src="script.js"></script>
</body>  
</html>
